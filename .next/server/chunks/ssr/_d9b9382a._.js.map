{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 6, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 18, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/USER/Documents/SEMESTER_7/web-magang/frontend-magang/src/lib/auth.ts"],"sourcesContent":["import { jwtVerify } from \"jose\";\r\n\r\nexport type AppUser = { id: string; role: string };\r\n\r\nconst key = () => new TextEncoder().encode(process.env.JWT_SECRET || \"\");\r\n\r\nexport async function getUserFromToken(token?: string): Promise<AppUser | null> {\r\n  if (!token) return null;\r\n  try {\r\n    const { payload } = await jwtVerify(token, key());\r\n    const id = (payload.sub as string) || (payload.userId as string);\r\n    const role = (payload.role as string) || \"unknown\";\r\n    if (!id) return null;\r\n    return { id, role };\r\n  } catch {\r\n    return null;\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;AAAA;;AAIA,MAAM,MAAM,IAAM,IAAI,cAAc,MAAM,CAAC,QAAQ,GAAG,CAAC,UAAU,IAAI;AAE9D,eAAe,iBAAiB,KAAc;IACnD,IAAI,CAAC,OAAO,OAAO;IACnB,IAAI;QACF,MAAM,EAAE,OAAO,EAAE,GAAG,MAAM,CAAA,GAAA,uJAAA,CAAA,YAAS,AAAD,EAAE,OAAO;QAC3C,MAAM,KAAK,AAAC,QAAQ,GAAG,IAAgB,QAAQ,MAAM;QACrD,MAAM,OAAO,AAAC,QAAQ,IAAI,IAAe;QACzC,IAAI,CAAC,IAAI,OAAO;QAChB,OAAO;YAAE;YAAI;QAAK;IACpB,EAAE,OAAM;QACN,OAAO;IACT;AACF","debugId":null}},
    {"offset": {"line": 45, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/USER/Documents/SEMESTER_7/web-magang/frontend-magang/src/app/%28dashboard%29/dashboard/page.tsx"],"sourcesContent":["// src/app/(dashboard)/dashboard/page.tsx\r\nimport { cookies } from \"next/headers\";\r\nimport { redirect } from \"next/navigation\";\r\nimport { getUserFromToken } from \"@/lib/auth\";\r\n\r\nexport default async function DashboardIndex() {\r\n  const cookieStore = await cookies();                 // ⬅️ wajib await\r\n  const token = cookieStore.get(\"auth_token\")?.value;  // tidak error lagi\r\n\r\n  const user = await getUserFromToken(token);\r\n\r\n  if (!user) redirect(\"/login\");\r\n  if (user.role === \"admin\") redirect(\"/dashboard/admin\");\r\n  if (user.role === \"peserta\") redirect(\"/dashboard/peserta\");\r\n  redirect(\"/login\");\r\n}\r\n"],"names":[],"mappings":"AAAA,yCAAyC;;;;AACzC;AACA;AAAA;AACA;;;;AAEe,eAAe;IAC5B,MAAM,cAAc,MAAM,CAAA,GAAA,+HAAA,CAAA,UAAO,AAAD,KAAqB,iBAAiB;IACtE,MAAM,QAAQ,YAAY,GAAG,CAAC,eAAe,OAAQ,mBAAmB;IAExE,MAAM,OAAO,MAAM,CAAA,GAAA,kHAAA,CAAA,mBAAgB,AAAD,EAAE;IAEpC,IAAI,CAAC,MAAM,CAAA,GAAA,qLAAA,CAAA,WAAQ,AAAD,EAAE;IACpB,IAAI,KAAK,IAAI,KAAK,SAAS,CAAA,GAAA,qLAAA,CAAA,WAAQ,AAAD,EAAE;IACpC,IAAI,KAAK,IAAI,KAAK,WAAW,CAAA,GAAA,qLAAA,CAAA,WAAQ,AAAD,EAAE;IACtC,CAAA,GAAA,qLAAA,CAAA,WAAQ,AAAD,EAAE;AACX","debugId":null}}]
}